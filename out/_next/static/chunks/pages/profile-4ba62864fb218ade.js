(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(8550)}])},8550:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Profile}});var r=s(5893),a=s(7294),l=s(3495),n=s(1163),i=s(9008),o=s.n(i),d=s(6266),c=s(1977),x=s(33);function Profile(){let{currentUser:e,updateUserProfile:t,logout:s}=(0,d.a)(),i=(0,n.useRouter)(),[m,h]=(0,a.useState)(!1),[u,p]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[v,N]=(0,a.useState)(""),[k,C]=(0,a.useState)(""),[L,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!e){i.push("/login?redirect=profile");return}p(e.name||""),y(e.email||""),b(e.phone||""),w(e.bio||"")},[e,i]);let handleSubmit=async e=>{if(e.preventDefault(),N(""),C(""),!u){N("姓名不能為空");return}try{E(!0),await t({name:u,phone:f,bio:j}),C("個人資料已成功更新"),h(!1)}catch(e){N(e.message||"更新失敗，請稍後再試")}finally{E(!1)}},handleLogout=async()=>{try{await s(),i.push("/")}catch(e){N("登出失敗，請稍後再試")}};return e?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"個人資料 | SecondPrice.hk"})}),(0,r.jsx)(c.Z,{}),(0,r.jsx)("main",{className:"flex-grow container mx-auto px-4 py-16 max-w-4xl",children:(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:(0,r.jsxs)("div",{className:"md:flex",children:[(0,r.jsxs)("div",{className:"bg-gray-50 md:w-64 p-6 border-r border-gray-100",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-3",children:u&&u.substring(0,1).toUpperCase()}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:u}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:g})]}),(0,r.jsxs)("nav",{className:"space-y-2",children:[(0,r.jsxs)("button",{className:"w-full text-left px-4 py-2 rounded-lg text-primary-600 bg-primary-50 font-medium flex items-center text-sm",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"個人資料"]}),(0,r.jsxs)("button",{className:"w-full text-left px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-100 flex items-center text-sm",onClick:()=>i.push("/orders"),children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"我的訂單"]}),(0,r.jsxs)("button",{className:"w-full text-left px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-100 flex items-center text-sm",onClick:()=>i.push("/favorites"),children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"我的收藏"]}),(0,r.jsxs)("button",{className:"w-full text-left px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-100 flex items-center text-sm",onClick:()=>i.push("/settings"),children:[(0,r.jsxs)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"帳號設定"]}),(0,r.jsxs)("button",{onClick:handleLogout,className:"w-full text-left px-4 py-2 rounded-lg text-red-600 hover:bg-red-50 flex items-center text-sm",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"登出"]})]})]}),(0,r.jsxs)("div",{className:"p-8 flex-grow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"個人資料"}),!m&&(0,r.jsx)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"px-4 py-2 bg-primary-50 text-primary-600 rounded-lg text-sm font-medium hover:bg-primary-100 transition-colors",children:"編輯資料"})]}),v&&(0,r.jsx)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm rounded",children:(0,r.jsx)("p",{children:v})}),k&&(0,r.jsx)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-3 bg-green-50 border-l-4 border-green-500 text-green-700 text-sm rounded",children:(0,r.jsx)("p",{children:k})}),m?(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"姓名"}),(0,r.jsx)("input",{id:"name",type:"text",value:u,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"電子郵件"}),(0,r.jsx)("input",{id:"email",type:"email",value:g,disabled:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 bg-gray-50 text-gray-500"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"電子郵件無法修改"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"電話號碼"}),(0,r.jsx)("input",{id:"phone",type:"tel",value:f,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-1",children:"個人簡介"}),(0,r.jsx)("textarea",{id:"bio",value:j,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all h-32"})]}),(0,r.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,r.jsx)(l.E.button,{whileHover:{y:-2},whileTap:{scale:.98},type:"submit",disabled:L,className:"px-6 py-2 text-white rounded-lg shadow-md transition-all ".concat(L?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-secondary-500 hover:shadow-lg"),children:L?"保存中...":"保存變更"}),(0,r.jsx)(l.E.button,{whileHover:{y:-2},whileTap:{scale:.98},type:"button",disabled:L,onClick:()=>h(!1),className:"px-6 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all",children:"取消"})]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"姓名"}),(0,r.jsx)("p",{className:"text-lg",children:u||"未設置"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"電子郵件"}),(0,r.jsx)("p",{className:"text-lg",children:g})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"電話號碼"}),(0,r.jsx)("p",{className:"text-lg",children:f||"未設置"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"個人簡介"}),(0,r.jsx)("p",{className:"text-lg whitespace-pre-line",children:j||"未設置"})]})]})]})]})})})}),(0,r.jsx)(x.Z,{})]}):null}}},function(e){e.O(0,[286,202,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);