(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{7995:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorites",function(){return a(4596)}])},4596:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Favorites}});var s=a(5893),r=a(7294),i=a(3495),l=a(1163),n=a(9008),o=a.n(n),c=a(1664),d=a.n(c),m=a(6266),x=a(1977),h=a(33);function Favorites(){let{currentUser:e}=(0,m.a)(),t=(0,l.useRouter)(),[a,n]=(0,r.useState)([{id:1,title:"iPhone 13 Pro Max 256GB 銀色",price:4580,originalPrice:5200,condition:"9成新",platform:"Carousell",location:"荃灣",image:"https://images.unsplash.com/photo-1632661674596-df8be070a5c5?w=500",url:"#",addedAt:new Date(Date.now()-1728e5).toISOString()},{id:2,title:"AirPods Pro (第一代) 充電盒有損耗",price:680,originalPrice:1200,condition:"7成新",platform:"Facebook",location:"觀塘",image:"https://images.unsplash.com/photo-1606741965429-baedd3d6bed7?w=500",url:"#",addedAt:new Date(Date.now()-432e6).toISOString()},{id:3,title:"IKEA BILLY 書櫃 白色 80x28x202 公分",price:350,originalPrice:499,condition:"8成新",platform:"Carousell",location:"太古",image:"https://images.unsplash.com/photo-1588329934223-1c9d239e1c36?w=500",url:"#",addedAt:new Date(Date.now()-6048e5).toISOString()},{id:4,title:"Sony WH-1000XM4 無線降噪耳機 黑色",price:1250,originalPrice:2499,condition:"9成新",platform:"Facebook",location:"旺角",image:"https://images.unsplash.com/photo-1618366712010-f4ae9c647dcb?w=500",url:"#",addedAt:new Date(Date.now()-864e6).toISOString()}]),[c,u]=(0,r.useState)("newest"),[p,g]=(0,r.useState)("all"),formatDate=e=>{let t=new Date(e);return t.toLocaleDateString("zh-HK",{year:"numeric",month:"long",day:"numeric"})},filteredFavorites=()=>{let e=[...a];switch("all"!==p&&(e=e.filter(e=>e.platform.toLowerCase()===p)),c){case"newest":e.sort((e,t)=>new Date(t.addedAt)-new Date(e.addedAt));break;case"oldest":e.sort((e,t)=>new Date(e.addedAt)-new Date(t.addedAt));break;case"price_asc":e.sort((e,t)=>e.price-t.price);break;case"price_desc":e.sort((e,t)=>t.price-e.price)}return e},calculateDiscount=(e,t)=>t?Math.round((t-e)/t*100):null,removeFavorite=e=>{n(a.filter(t=>t.id!==e))};return((0,r.useEffect)(()=>{e||t.push("/login?redirect=favorites")},[e,t]),e)?(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"我的收藏 | SecondPrice.hk"})}),(0,s.jsx)(x.Z,{}),(0,s.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-20 max-w-6xl",children:[(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"我的收藏"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"您收藏的二手商品，隨時查看價格變化"})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white p-4 rounded-xl shadow-sm mb-6 flex flex-wrap gap-4 items-center",children:[(0,s.jsx)("div",{className:"mr-auto",children:(0,s.jsxs)("span",{className:"text-gray-500 text-sm",children:["共 ",a.length," 項收藏"]})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{htmlFor:"platform",className:"text-sm text-gray-600 mr-2",children:"平台:"}),(0,s.jsxs)("select",{id:"platform",value:p,onChange:e=>g(e.target.value),className:"p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,s.jsx)("option",{value:"all",children:"全部"}),(0,s.jsx)("option",{value:"carousell",children:"Carousell"}),(0,s.jsx)("option",{value:"facebook",children:"Facebook"})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{htmlFor:"sort",className:"text-sm text-gray-600 mr-2",children:"排序:"}),(0,s.jsxs)("select",{id:"sort",value:c,onChange:e=>u(e.target.value),className:"p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,s.jsx)("option",{value:"newest",children:"最近收藏"}),(0,s.jsx)("option",{value:"oldest",children:"最早收藏"}),(0,s.jsx)("option",{value:"price_asc",children:"價格由低至高"}),(0,s.jsx)("option",{value:"price_desc",children:"價格由高至低"})]})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:filteredFavorites().length>0?filteredFavorites().map((e,t)=>(0,s.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1+.05*t},className:"bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"md:flex items-start gap-6",children:[(0,s.jsx)("div",{className:"md:w-48 h-48 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0 mb-4 md:mb-0",children:(0,s.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:e.title}),(0,s.jsx)("button",{onClick:()=>removeFavorite(e.id),className:"text-gray-400 hover:text-red-500 p-1",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.condition," • ",e.location," • ",e.platform]})}),(0,s.jsxs)("div",{className:"flex items-end mb-4",children:[(0,s.jsxs)("span",{className:"text-2xl font-bold text-gray-800 mr-2",children:["$",e.price]}),e.originalPrice&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 line-through mr-2",children:["$",e.originalPrice]}),(0,s.jsxs)("span",{className:"text-xs text-green-600 font-medium px-1.5 py-0.5 bg-green-50 rounded-full",children:["省 ",calculateDiscount(e.price,e.originalPrice),"%"]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["收藏於 ",formatDate(e.addedAt)]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-primary-500 text-white text-sm font-medium rounded-lg hover:bg-primary-600 transition-colors",children:"查看商品"})})]})]})]})},e.id)):(0,s.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"暫無收藏商品"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"開始瀏覽二手商品並收藏您感興趣的物品"}),(0,s.jsx)(d(),{href:"/search",children:(0,s.jsx)(i.E.button,{whileHover:{y:-2},whileTap:{scale:.98},className:"px-6 py-2 bg-primary-500 text-white font-medium rounded-lg hover:bg-primary-600 transition-colors",children:"開始搜尋"})})]})})]}),(0,s.jsx)(h.Z,{})]}):null}}},function(e){e.O(0,[286,202,774,888,179],function(){return e(e.s=7995)}),_N_E=e.O()}]);